<?php namespace Obj; class Obj { private static $l31="0123456789bcdefghjkmnpqrstuvwxyz"; private static $lbk=array(020,8,4,2,1); public static function Obk($lbl,$Obl,$lbm=NULL) { $Obm=strlen($lbl)-strpos($lbl,"."); $lbn=strlen($Obl)-strpos($Obl,"."); $lbm=$lbm ? : pow(012,-max($Obm-1,$lbn-1,0))/2; $Obn=-0264; $lbo=0264; $Obo=-0132; $lbp=0132; $Obp=array(); $lbq=0264; $Obq=TRUE; $lbr=0; $Obr=0; while ($lbq>=$lbm) { if ($Obq) { $lbs=($Obn+$lbo)/2; if ($Obl>$lbs) { $lbr |= self::$lbk[$Obr]; $Obn=$lbs; } else { $lbo=$lbs; } } else { $lbs=($Obo+$lbp)/2; if ($lbl>$lbs) { $lbr |= self::$lbk[$Obr]; $Obo=$lbs; } else { $lbp=$lbs; } } $Obq=!$Obq; if ($Obr<4) { $Obr ++; } else { $Obp[]=self::$l31[$lbr]; $lbq=max($lbo-$Obn,$lbp-$Obo); $Obr=0; $lbr=0; } } return join("",$Obp); } public static function Obs($Obp) { $Obn=-0264; $lbo=0264; $Obo=-0132; $lbp=0132; $lbt=0132; $Obt=0264; for ($l3v=0,$lbu=strlen($Obp); $l3v<$lbu; $l3v ++) { $l94=strpos(self::$l31,$Obp[$l3v]); if (1&$l3v) { if (020&$l94) { $Obo=($Obo+$lbp)/2; } else { $lbp=($Obo+$lbp)/2; } if (8&$l94) { $Obn=($Obn+$lbo)/2; } else { $lbo=($Obn+$lbo)/2; } if (4&$l94) { $Obo=($Obo+$lbp)/2; } else { $lbp=($Obo+$lbp)/2; } if (2&$l94) { $Obn=($Obn+$lbo)/2; } else { $lbo=($Obn+$lbo)/2; } if (1&$l94) { $Obo=($Obo+$lbp)/2; } else { $lbp=($Obo+$lbp)/2; } $lbt /= 8; $Obt /= 4; } else { if (020&$l94) { $Obn=($Obn+$lbo)/2; } else { $lbo=($Obn+$lbo)/2; } if (8&$l94) { $Obo=($Obo+$lbp)/2; } else { $lbp=($Obo+$lbp)/2; } if (4&$l94) { $Obn=($Obn+$lbo)/2; } else { $lbo=($Obn+$lbo)/2; } if (2&$l94) { $Obo=($Obo+$lbp)/2; } else { $lbp=($Obo+$lbp)/2; } if (1&$l94) { $Obn=($Obn+$lbo)/2; } else { $lbo=($Obn+$lbo)/2; } $lbt /= 4; $Obt /= 8; } } $lbl=round(($Obo+$lbp)/2,max(1,-round(log10($lbt)))-1); $Obl=round(($Obn+$lbo)/2,max(1,-round(log10($Obt)))-1); return array($lbl,$Obl); } }